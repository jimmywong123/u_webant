(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{Yh1E:function(e,t,a){e.exports={main:"main___1jAYI",login:"login___3XLHu",icon:"icon___I5kQP",other:"other___Hd2O0",register:"register___3Qp8X"}},tQYt:function(e,t,a){"use strict";var n=a("TqRt"),c=a("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("14J3");var l=n(a("BMrR"));a("jCWc");var i=n(a("kPKH"));a("Pwec");var o=n(a("CtXQ")),p=n(a("lwsE")),u=n(a("W8MJ")),h=n(a("a1gu")),r=n(a("Nsbk")),d=n(a("7W2i"));a("Znn+");var s,f,m=n(a("ZTPi")),g=c(a("q1tI")),y=a("MuoO"),E=n(a("NTd/")),w=n(a("Yh1E")),k=n(a("XFcD")),v=n(a("w7BU")),C=n(a("8dQv")),L=a("oX+y"),b=a("XhLx"),_=m.default.TabPane,P=(s=(0,y.connect)(function(e){var t=e.user,a=e.phoneLogin,n=e.emailLogin;return{user:t,phoneLogin:a,emailLogin:n}}),s(f=function(e){function t(e){var a;return(0,p.default)(this,t),a=(0,h.default)(this,(0,r.default)(t).call(this,e)),a.handleOnChange=function(e){a.setState({type:e})},a.getPhoneCaptcha=function(e,t){var n=a.props.dispatch;n({type:"phoneLogin/getCaptcha",payload:e}).then(t())},a.checkPhoneCaptcha=function(e){var t=a.props.dispatch;t({type:"phoneLogin/checkCaptcha",payload:e})},a.getEmailCaptcha=function(e,t){var n=a.props.dispatch;n({type:"emailLogin/getCaptcha",payload:e}).then(t())},a.checkEmailCaptcha=function(e){var t=a.props.dispatch;t({type:"emailLogin/checkCaptcha",payload:e})},a.state={type:"wechat",initDone:!1},a}return(0,d.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.user,a=e.dispatch,n=this.state.type,c=t.currentUser,l=t.UTOKEN,i=new URL(window.location.href),o=(0,L.getPageQuery)(),p=o.code,u=o.state;"wechat"===n&&(p&&u&&0===u.indexOf("webapp|")?a({type:"wechatLogin/webappLogin",payload:{code:p,redirect:u.replace("webapp|","")}}):p&&a({type:"wechatLogin/login",payload:{code:p,redirect:u}}));var h=o.redirect;if(h&&c&&l){h=decodeURIComponent(h);try{var r=new URL(h);r.origin!==i.origin&&(h.indexOf("?")>0?h.indexOf("utoken=")<0&&(h="".concat(h,"&utoken=").concat(l)):h="".concat(h,"?utoken=").concat(l),window.location.href=h)}catch(e){console.error("LoginPage componentDidMount",e)}}this.setState({initDone:!0})}},{key:"render",value:function(){var e=this.props,t=e.phoneLogin,a=e.emailLogin,n=this.state,c=n.type,p=n.initDone,u=t.captchaTips,h=a.captchaTips,r=g.default.createElement("span",null,g.default.createElement(o.default,{type:"phone"}),g.default.createElement("span",null,"mobile"===c?E.default.get("login.by.mobile"):"")),d=g.default.createElement("span",null,g.default.createElement(o.default,{type:"mail"}),g.default.createElement("span",null,"mail"===c?E.default.get("login.by.email"):"")),s=g.default.createElement("span",null,g.default.createElement(o.default,{type:"wechat"}),g.default.createElement("span",null,"wechat"===c?E.default.get("login.by.wechat"):""));return p&&g.default.createElement(l.default,{type:"flex",justify:"space-around",align:"middle",className:"flex"},g.default.createElement(i.default,{span:24},g.default.createElement("div",{className:w.default.main},g.default.createElement("div",{className:w.default.login},g.default.createElement(m.default,{type:"card",defaultActiveKey:"wechat",onChange:this.handleOnChange},g.default.createElement(_,{tab:r,key:"mobile"},g.default.createElement(k.default,{checkPhone:b.checkPhone,getCaptcha:this.getPhoneCaptcha,checkCaptcha:this.checkPhoneCaptcha,captchaTips:u,getSupports:b.getSupports})),g.default.createElement(_,{tab:d,key:"mail"},g.default.createElement(v.default,{checkEmail:b.checkEmail,getCaptcha:this.getEmailCaptcha,checkCaptcha:this.checkEmailCaptcha,captchaTips:h})),g.default.createElement(_,{tab:s,key:"wechat"},g.default.createElement(C.default,null)))))))}}]),t}(g.Component))||f),O=P;t.default=O}}]);